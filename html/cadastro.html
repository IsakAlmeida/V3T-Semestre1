<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="../imgs/logo-redonda.png" type="image/png">
    <link rel="stylesheet" href="../styles/style-cadastro.css">
    <script src="../scripts/script-cadastro.js"></script>
    <title>Cadastro - V3T</title>
</head>

<body>
    
    <header>
        <div id="div-img">
            <a href="index.html"><img class="img-header" src="../imgs/logo-preta.png" alt="logo_V3T" id="logo"></a>
        </div>
        <div class="div-nav">
            <ul>
                <a href="simulador.html">
                    <li>Simulador Financeiro</li>
                </a>
                <a href="sobre.html">
                    <li>Sobre</li>
                </a>
                <a href="contato.html">
                    <li>Contato</li>
                </a>
                <a href="cadastro.html">
                    <li> <u>Cadastro</u> </li>
                </a>
                <a href="login.html">
                    <li id="bt-login">LOGIN </li>
                </a>
            </ul>
        </div>
    </header>

    <main>
        <div class="fundo_cadastro">
            <div class="quadrado_com_sombra">
                <div class="paragrafos_e_inputs">
                    <p class="titulo"> Insira suas informações pessoais para criar sua conta </p>
                    <p class="subtitulo">Você ja tem uma conta? <a href="login.html" class="entrar">Entrar</a> </p>

                    <input type="text" id="ipt_nome" placeholder="Nome">
                    <input type="text" id="ipt_email" placeholder="Email">

                    <div class="div_senha">
                        <input type="password" id="ipt_senha" placeholder="Senha">
                        <img src="../imgs/olho-fechado-senha.png" alt="Mostrar senha" class="olho-senha" onclick="mostrarSenha('ipt_senha', this)">
                    </div>

                    <div class="div_senha">
                        <input type="password" id="ipt_confirmacaoSenha" placeholder="Confirmação de senha">
                        <img src="../imgs/olho-fechado-senha.png" alt="Mostrar senha" class="olho-senha" onclick="mostrarSenha('ipt_confirmacaoSenha', this)">
                    </div>

                    <input type="text" id="ipt_token" placeholder="Token da Empresa">

                    <button class="botao" onclick="cadastrar()">Cadastrar</button>
                </div>
            </div>
    </main>

</body>

<script>
    // === Função para mostrar icone de olho e senha no input de senha ===
    function mostrarSenha(idInput, icone) {
        const input = document.getElementById(idInput);

        if (input.type === "password") {
            input.type = "text";
            icone.src = "../imgs/olho-aberto-senha.png"; // ícone de olho aberto
        } else {
            input.type = "password";
            icone.src = "../imgs/olho-fechado-senha.png"; // ícone de olho fechado
        }
    }

    //=== Função Cadastrar ===
    function cadastrar() {
        var nome = ipt_nome.value;
        var email = ipt_email.value;
        var senha = ipt_senha.value;
        var confirmacaoSenha = ipt_confirmacaoSenha.value;
        var token = ipt_token.value;

        //Verificação de inputs em branco
        if (nome == "") {
            alert('O nome não pode estar em branco!');
        } else if (email == "") {
            alert('O Email não pode estar em branco!');
        } else if (senha == "") {
            alert('A senha não pode estar em branco!');
        } else if (confirmacaoSenha == "") {
            alert('A confirmação de senha não pode estar em branco!');
        } else if (token == "") {
            alert('O token não pode estar em branco!');
        } 
        // Verificação de quantidade de caracteres na senha
        else if (senha.length < 8) {  
            alert('A senha deve ter pelo menos 8 caracteres!');
        } else if (senha.indexOf("0") == -1 && senha.indexOf("1") == -1 && senha.indexOf("2") == -1 &&
            senha.indexOf("3") == -1 && senha.indexOf("4") == -1 && senha.indexOf("5") == -1 &&
            senha.indexOf("6") == -1 && senha.indexOf("7") == -1 && senha.indexOf("8") == -1 &&
            senha.indexOf("9") == -1) { 
            alert('A senha deve conter pelo menos um número!');
        } 
        // Verificação de @ no email
        else if (email.indexOf("@") == -1) {
            alert('O email deve conter o símbolo @');
        } else {
        // Verificação de letra maiúscula
            var contador = 0;
            var temMaiuscula = false;

            while (contador < senha.length) {
                var letra = senha[contador];

                if (letra >= "A" && letra <= "Z") {
                    temMaiuscula = true;
                    break; // para o loop assim que encontrar uma maiúscula
                }
                contador++;
            }

            if (!temMaiuscula) {
                alert('A senha deve conter pelo menos uma letra maiúscula!');
            } 
            //Verificação de caractere especial - se n for encontrado o caractere em alguma posicão da senha, ele retorna -1, e se uma das condições forem verdadeiras, exibe o alert
            else if (senha.indexOf("!") == -1 && senha.indexOf("@") == -1 && senha.indexOf("#") == -1 && senha.indexOf("$") == -1 && senha.indexOf("%") == -1 && senha.indexOf("&") == -1) {
                alert('A senha deve conter pelo menos um caractere especial (!, @, #, $, %, &)');
            } 
            // Confirmação de senha iguais
            else if (senha != confirmacaoSenha) {
                alert('As senhas digitadas são diferentes. Por favor, verifique e tente novamente.'); 
            } 
            // Else final
            else {
                alert('Cadastrado com sucesso!');
            }
        }
    }
</script>

</html>